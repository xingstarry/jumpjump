require=function t(e,o,c){function i(s,r){if(!o[s]){if(!e[s]){var a="function"==typeof require&&require;if(!r&&a)return a(s,!0);if(n)return n(s,!0);var h=new Error("Cannot find module '"+s+"'");throw h.code="MODULE_NOT_FOUND",h}var d=o[s]={exports:{}};e[s][0].call(d.exports,function(t){var o=e[s][1][t];return i(o||t)},d,d.exports,t,e,o,c)}return o[s].exports}for(var n="function"==typeof require&&require,s=0;s<c.length;s++)i(c[s]);return i}({block:[function(t,e,o){"use strict";cc._RF.push(e,"098a4DupE5IWpkFPQPDajil","block"),cc.Class({extends:cc.Component,properties:{},start:function(){this.mid=this.node.getChildByName("mid"),this.up=this.node.getChildByName("up"),this.down=this.node.getChildByName("down"),this.left=this.node.getChildByName("left"),this.right=this.node.getChildByName("right")},is_jump_on_block:function(t,e){var o=this.mid.convertToWorldSpaceAR(cc.p(0,0)),c=cc.pSub(t,o),i=cc.pLength(c),n=o;if(1===e){var s=this.up.convertToWorldSpaceAR(cc.p(0,0));c=cc.pSub(t,s),i>(h=cc.pLength(c))&&(i=h,n=s);var r=this.down.convertToWorldSpaceAR(cc.p(0,0));c=cc.pSub(t,r),i>(h=cc.pLength(c))&&(i=h,n=r)}else{var a=this.left.convertToWorldSpaceAR(cc.p(0,0));c=cc.pSub(t,a);var h=cc.pLength(c);i>h&&(i=h,n=a);var d=this.right.convertToWorldSpaceAR(cc.p(0,0));c=cc.pSub(t,d),i>(h=cc.pLength(c))&&(i=h,n=d)}return c=cc.pSub(t,n),Math.abs(cc.pLength(c))<100&&(t.x=n.x,t.y=n.y,!0)}}),cc._RF.pop()},{}],game_scenes:[function(t,e,o){"use strict";cc._RF.push(e,"a71d6Tj2rJFXr7hsBwPhAbk","game_scenes"),cc.Class({extends:cc.Component,properties:{player:{type:cc.Node,default:null},block_prefab:{type:cc.Prefab,default:[]},block_root:{type:cc.Node,default:null},left_org:cc.p(0,0),map_root:{type:cc.Node,default:null},y_radio:.5560472,checkout:{type:cc.Node,default:null},scoreDisplay:{type:cc.Label,default:null}},onLoad:function(){this.score=0},start:function(){this.cur_block=cc.instantiate(this.block_prefab[Math.floor(5*Math.random())]),this.block_root.addChild(this.cur_block),this.cur_block.setPosition(this.block_root.convertToNodeSpaceAR(this.left_org));var t=this.cur_block.getChildByName("mid").convertToWorldSpaceAR(cc.p(0,0));this.player.setPosition(this.map_root.convertToNodeSpaceAR(t)),this.next_block=this.cur_block,this.player_com=this.player.getComponent("player"),this.block_zorder=-1,this.add_block()},gainScore:function(){this.score+=1,this.scoreDisplay.string="Score: "+this.score.toString()},add_block:function(){this.cur_block=this.next_block,this.next_block=cc.instantiate(this.block_prefab[Math.floor(5*Math.random())]),this.block_root.addChild(this.next_block),this.next_block.setLocalZOrder(this.block_zorder),this.block_zorder--;var t=200*Math.random()+250,e=t*this.y_radio,o=this.cur_block.getPosition();o.x+=t*this.player_com.dir,o.y+=e,this.next_block.setPosition(o),this.player_com.set_next_block(this.next_block.getComponent("block"))},move_map:function(t,e){var o=cc.moveBy(.3,t,e),c=cc.callFunc(function(){this.add_block()}.bind(this)),i=cc.sequence([o,c]);this.map_root.runAction(i)},on_checkout_game:function(){this.checkout.active=!0},on_game_again:function(){cc.director.loadScene("game_scene")}}),cc._RF.pop()},{}],player:[function(t,e,o){"use strict";cc._RF.push(e,"71e71Ry3IZJuZTPGt2gDAxm","player");var c=t("game_scenes");cc.Class({extends:cc.Component,properties:{init_speed:150,a_power:800,y_radio:.5560472,game_manager:{type:c,default:null}},onLoad:function(){this.next_block=null,this.dir=1},player_jump:function(){var t=this.x_distance*this.dir,e=this.x_distance*this.y_radio,o=this.node.getPosition();o.x+=t,o.y+=e,this.rot_node.runAction(cc.rotateBy(.6,360*this.dir));var c=this.node.parent.convertToWorldSpaceAR(o),i=!1;this.next_block.is_jump_on_block(c,this.dir)?(o=this.node.parent.convertToNodeSpaceAR(c),this.game_manager.gainScore()):i=!0;var n=cc.jumpTo(.5,o,200,1);this.dir=Math.random()<.5?-1:1;var s=cc.callFunc(function(){i?this.game_manager.on_checkout_game():1===this.dir?this.game_manager.move_map(180-c.x,-e):this.game_manager.move_map(580-c.x,-e)}.bind(this)),r=cc.sequence(n,s);this.node.runAction(r)},set_next_block:function(t){console.log(t),this.next_block=t},start:function(){this.rot_node=this.node.getChildByName("rotate"),this.anim_node=this.rot_node.getChildByName("anim"),this.is_power_mode=!1,this.speed=0,this.x_distance=0,this.anim_node.on(cc.Node.EventType.TOUCH_START,function(t){this.is_power_mode=!0,this.speed=this.init_speed,this.x_distance=0,this.anim_node.stopAllActions(),this.anim_node.runAction(cc.scaleTo(.6,1.2,.7))}.bind(this),this),this.anim_node.on(cc.Node.EventType.TOUCH_END,function(t){this.is_power_mode=!1,this.anim_node.stopAllActions(),this.anim_node.runAction(cc.scaleTo(.1,1,1)),this.player_jump()}.bind(this),this),this.anim_node.on(cc.Node.EventType.TOUCH_CANCEL,function(t){this.is_power_mode=!1,this.anim_node.stopAllActions(),this.anim_node.runAction(cc.scaleTo(.1,1,1)),this.player_jump()}.bind(this),this)},update:function(t){this.is_power_mode&&(this.speed+=this.a_power*t,this.x_distance+=this.speed*t)}}),cc._RF.pop()},{game_scenes:"game_scenes"}]},{},["block","game_scenes","player"]);